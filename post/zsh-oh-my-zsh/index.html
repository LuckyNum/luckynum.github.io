<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>ZSH + Oh-my-zsh | ATOZ</title>
<meta name="description" content="Hello, World!">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://luckynum.github.io/favicon.ico?v=1555555197197">
<link rel="stylesheet" href="https://luckynum.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://luckynum.github.io">
        <img src="https://luckynum.github.io/images/avatar.png?v=1555555197197" class="site-logo">
        <h1 class="site-title">ATOZ</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
        
          <a href="/post/music/" class="site-nav">
            音乐🎵
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Hello, World!
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">ZSH + Oh-my-zsh</h2>
            <div class="post-date">2019-04-15</div>
            
            <div class="post-content">
              <h1 id="zsh-oh-my-zsh">ZSH + Oh-my-zsh</h1>
<blockquote>
<p>环境：CentOS 7</p>
</blockquote>
<h2 id="1-zsh">1. ZSH</h2>
<pre><code class="language-shell"># 查看当前环境shell
echo $SHELL
# 查看系统自带哪些shell
cat /etc/shells
# 安装zsh
yum install zsh
# 将zsh设置为默认shell
chsh -s /bin/zsh
</code></pre>
<!-- more --> 
<p>可以通过<code>echo $SHELL</code>查看当前默认的shell，如果没有改为<code>/bin/zsh</code>，那么需要重启shell。</p>
<h2 id="2-oh-my-zsh">2. oh-my-zsh</h2>
<p><a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>出现了，有了这个东东，zsh配置起来就方便多了！</p>
<h3 id="安装oh-my-zsh">安装oh-my-zsh</h3>
<p>有若干安装方式，介绍三种：
1.自动安装</p>
<pre><code>wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh
</code></pre>
<p>2.手动安装</p>
<pre><code>git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc
</code></pre>
<p>3.真-手动安装</p>
<ul>
<li>在<a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>的github主页，手动将zip包下载下来。</li>
<li>将zip包解压，拷贝至<code>~/.oh-my-zsh</code>目录。此处省略拷贝的操作步骤。</li>
<li>执行<code>cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</code></li>
</ul>
<p>三选一即可，适合各种环境下的安装，然后需要<code>source ~/.zshrc</code>将配置生效。以下修改了<code>.zshrc</code>文件之后，都执行一下这个命令。</p>
<h3 id="zsh主题">zsh主题</h3>
<p>通过如下命令可以查看可用的<code>Theme</code>：</p>
<pre><code># ls ~/.oh-my-zsh/themes
</code></pre>
<p>如何修改zsh主题呢？
编辑<code>~/.zshrc</code>文件，将<code>ZSH_THEME=&quot;candy&quot;</code>,即将主题修改为<code>candy</code>。我采用的<code>agnoster</code>。</p>
<h3 id="zsh扩展">zsh扩展</h3>
<p>在<code>~/.zshrc</code>中找到<code>plugins</code>关键字，就可以自定义启用的插件了，系统默认加载<code>git</code>。</p>
<ul>
<li><strong>git插件</strong></li>
</ul>
<p>命令内容可以参考<code>cat ~/.oh-my-zsh/plugins/git/git.plugin.zsh</code>。</p>
<p>常用的：</p>
<pre><code>gapa    git add --patch
gc!    git commit -v --amend
gcl    git clone --recursive
gclean    git reset --hard &amp;&amp; git clean -dfx
gcm    git checkout master
gcmsg    git commit -m
gco    git checkout
gd    git diff
gdca    git diff --cached
gp    git push
grbc    git rebase --continue
gst    git status
gup    git pull --rebase
</code></pre>
<p>完整列表：<code>https://github.com/robbyrussell/oh-my-zsh/wiki/Plugin:git</code></p>
<ul>
<li><strong>extract</strong></li>
</ul>
<p>解压文件用的，所有的压缩文件，都可以直接<code>x filename</code>，不用记忆参数</p>
<p>当然，如果你想要用<code>tar</code>命令，可以使用<code>tar -</code>加<code>tab</code>键，zsh会列出参数的含义。</p>
<ul>
<li><strong>autojump</strong></li>
</ul>
<p>按照<a href="https://github.com/wting/autojump">官方文档</a>介绍，需要使用如下命令安装，而不是一些博客中的介绍：</p>
<pre><code>yum install autojump-zsh # CentOS
brew install autojump # Mac
</code></pre>
<p><code>CentOS</code>安装好之后，需要在<code>~/.zshrc</code>中配置一下，除了在<code>plugins</code>中增加<code>autojump</code>之外，还需要<code>~/.zshrc</code>文件的末尾添加一行：</p>
<pre><code class="language-shell">source /usr/share/autojump/autojump.zsh
</code></pre>
<p>安装好之后，记得<code>source ~/.zshrc</code>，然后你就可以通过<code>j+目录名</code>快速进行目录跳转。支持目录名的模糊匹配和自动补全。</p>
<p><code>j --stat 或 j -s</code>：可以查看历史路径库</p>
<ul>
<li><strong>zsh-autosuggestions</strong></li>
</ul>
<p><a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions</a></p>
<pre><code class="language-shell">git clone git://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions
</code></pre>
<p>在 <code>~/.zshrc</code> 中配置</p>
<pre><code class="language-shell">plugins=(其他的插件 zsh-autosuggestions)
</code></pre>
<p>因为箭头<code>→</code>不太方便，在<code>.zshrc</code>中自定义补全快捷键为逗号，但是又一次遇到了需要输入逗号的情况，所以，并不太推荐如下修改：</p>
<pre><code class="language-shell">bindkey ',' autosuggest-accept
</code></pre>
<ul>
<li><strong>zsh-syntax-highlighting</strong></li>
</ul>
<p><a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting</a></p>
<pre><code class="language-shell">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
</code></pre>
<p><code>~/.zshrc</code>文件中配置：</p>
<pre><code class="language-shell">plugins=(其他的插件 zsh-syntax-highlighting)
</code></pre>
<ul>
<li><strong>git-open</strong></li>
</ul>
<p><a href="https://github.com/paulirish/git-open">git-open</a>插件可以在你git项目下打开远程仓库浏览项目。</p>
<pre><code class="language-shell">git clone https://github.com/paulirish/git-open.git $ZSH_CUSTOM/plugins/git-open
</code></pre>
<ul>
<li><strong>bat</strong></li>
</ul>
<p><code>bat</code> 代替 <code>cat</code>
<code>cat</code> 某个文件，可以在终端直接输出文件内容，<code>bat</code> 相比 <code>cat</code> 增加了行号和颜色高亮 👍</p>
<pre><code class="language-shell">brew install bat
</code></pre>
<h3 id="常用快捷键">常用快捷键</h3>
<ul>
<li>命令历史记录
<ul>
<li>一旦在 shell 敲入正确命令并能执行后，shell 就会存储你所敲入命令的历史记录（存放在<code>~/.zsh_history</code> 文件中），方便再次运行之前的命令。可以按方向键↑和↓来查看之前执行过的命令</li>
<li>可以用 <code>r</code>来执行上一条命令</li>
<li>使用 <code>ctrl-r</code> 来搜索命令历史记录</li>
</ul>
</li>
<li>命令别名
<ul>
<li>可以简化命令输入，在 <code>.zshrc</code> 中添加 <code>alias shortcut='this is the origin command'</code> 一行就相当于添加了别名</li>
<li>在命令行中输入 <code>alias</code> 可以查看所有的命令别名</li>
</ul>
</li>
</ul>
<h3 id="使用技巧">使用技巧</h3>
<ul>
<li>连按两次Tab会列出所有的补全列表并直接开始选择，补全项可以使用 ctrl+n/p/f/b上下左右切换</li>
<li>智能跳转，安装了 autojump 之后，zsh 会自动记录你访问过的目录，通过 j 目录名 可以直接进行目录跳转，而且目录名支持模糊匹配和自动补全，例如你访问过 hadoop-1.0.0 目录，输入j hado 即可正确跳转。j --stat 可以看你的历史路径库。</li>
<li>命令选项补全。在zsh中只需要键入 tar -<tab> 就会列出所有的选项和帮助说明</li>
<li>在当前目录下输入 .. 或 ... ，或直接输入当前目录名都可以跳转，你甚至不再需要输入 <code>cd</code> 命令了。在你知道路径的情况下，比如 <code>/usr/local/bin</code> 你可以输入<code>cd /u/l/b</code> 然后按进行补全快速输入</li>
<li>目录浏览和跳转：输入 d，即可列出你在这个会话里访问的目录列表，输入列表前的序号，即可直接跳转。</li>
<li>命令参数补全。键入<code>kill &lt;tab&gt;</code> 就会列出所有的进程名和对应的进程号</li>
<li>更智能的历史命令。在用或者方向上键查找历史命令时，zsh支持限制查找。比如，输入ls,然后再按方向上键，则只会查找用过的ls命令。而此时使用则会仍然按之前的方式查找，忽略 ls</li>
<li>多个终端会话共享历史记录</li>
<li>通配符搜索：<code>ls -l **/*.sh</code>，可以递归显示当前目录下的 shell 文件，文件少时可以代替 <code>find</code>。使用 <code>**/</code> 来递归搜索</li>
<li>扩展环境变量，输入环境变量然后按 就可以转换成表达的值</li>
<li>在 .zshrc 中添加 <code>setopt HIST_IGNORE_DUPS</code> 可以消除重复记录，也可以利用<code>sort -t &quot;;&quot; -k 2 -u ~/.zsh_history | sort -o ~/.zsh_history</code>手动清除</li>
</ul>
<h2 id="参考">参考</h2>
<ul>
<li><a href="https://github.com/wting/autojump">wting/autojump--官方文档</a></li>
<li><a href="https://github.com/powerline/fonts">powerline/fonts</a></li>
</ul>
<h3 id="linux">Linux</h3>
<ul>
<li><a href="http://macshuo.com/?p=676">终极 Shell</a></li>
<li><a href="https://www.cnblogs.com/EasonJim/p/7863099.html">Ubuntu 16.04下安装zsh和oh-my-zsh</a></li>
<li><a href="https://www.jianshu.com/p/9a5c4cb0452d">Ubuntu 下安装oh-my-zsh</a></li>
<li><a href="https://juejin.im/entry/5b46b268f265da0f793a5ae1">掘金-Shell 中的极品-- Zsh</a></li>
<li><a href="http://blog.csdn.net/huangbo10/article/details/50930002">CentOS 7下autojump无法使用的可能原因</a></li>
<li><a href="http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html">oh-my-zsh配置你的zsh提高shell逼格终极选择</a></li>
</ul>
<h3 id="mac">Mac</h3>
<ul>
<li><a href="https://hufangyun.com/2017/zsh-plugin/">zsh oh-my-zsh 插件推荐</a></li>
<li><a href="http://wdxtub.com/2016/02/18/oh-my-zsh/">zsh 全程指南-推荐</a></li>
<li><a href="https://iterm2colorschemes.com/">iterm主题下载</a></li>
<li><a href="https://xiaozhou.net/learn-the-command-line-iterm-and-zsh-2017-06-23.html">程序员内功系列--iTerm与Zsh篇</a></li>
<li><a href="https://www.dreamxu.com/mac-terminal/">Mac 下配置终端环境 iTerm2 + Zsh + Oh My Zsh + tmux</a></li>
</ul>
<h2 id="最后">最后</h2>
<ul>
<li><a href="https://github.com/Michael728/my-config-files">Github-Michael728/my-config-files</a> 附上我的配置文件地址；</li>
<li><a href="https://michael728.github.io/2018/03/11/tools-zsh-tutorial/">zsh+on-my-zsh配置教程指南</a> 本文地址</li>
</ul>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://luckynum.github.io/tag/8CbU30Xkb" class="tag">
                    shell
                  </a>
                
                  <a href="https://luckynum.github.io/tag/xEku-7lyT" class="tag">
                    zsh
                  </a>
                
                  <a href="https://luckynum.github.io/tag/-0Pt5bUl6" class="tag">
                    cmd
                  </a>
                
              </div>
            
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
